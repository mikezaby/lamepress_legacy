/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("scaytcheck",function(a){function l(){return typeof document.forms["optionsbar_"+e]!="undefined"?document.forms["optionsbar_"+e].options:[]}function m(){return typeof document.forms["languagesbar_"+e]!="undefined"?document.forms["languagesbar_"+e].scayt_lang:[]}function n(a,b){if(!a)return;var c=a.length;if(c==undefined){a.checked=a.value==b.toString();return}for(var d=0;d<c;d++)a[d].checked=!1,a[d].value==b.toString()&&(a[d].checked=!0)}function u(a){d.getById("dic_message_"+e).setHtml('<span style="color:red;">'+a+"</span>")}function v(a){d.getById("dic_message_"+e).setHtml('<span style="color:blue;">'+a+"</span>")}function w(a){a=String(a);var b=a.split(",");for(var c=0,e=b.length;c<e;c+=1)d.getById(b[c]).$.style.display="inline"}function x(a){a=String(a);var b=a.split(",");for(var c=0,e=b.length;c<e;c+=1)d.getById(b[c]).$.style.display="none"}function y(a){d.getById("dic_name_"+e).$.value=a}var b=!0,c,d=CKEDITOR.document,e=a.name,f=CKEDITOR.plugins.scayt.getUiTabs(a),g,h=[],i=0,j=["dic_create_"+e+",dic_restore_"+e,"dic_rename_"+e+",dic_delete_"+e],k=["mixedCase","mixedWithDigits","allCaps","ignoreDomainNames"],o=a.lang.scayt,p=[{id:"options",label:o.optionsTab,elements:[{type:"html",id:"options",html:'<form name="optionsbar_'+e+'"><div class="inner_options">'+'	<div class="messagebox"></div>'+'	<div style="display:none;">'+'		<input type="checkbox" name="options"  id="allCaps_'+e+'" />'+'		<label for="allCaps" id="label_allCaps_'+e+'"></label>'+"	</div>"+'	<div style="display:none;">'+'		<input name="options" type="checkbox"  id="ignoreDomainNames_'+e+'" />'+'		<label for="ignoreDomainNames" id="label_ignoreDomainNames_'+e+'"></label>'+"	</div>"+'	<div style="display:none;">'+'	<input name="options" type="checkbox"  id="mixedCase_'+e+'" />'+'		<label for="mixedCase" id="label_mixedCase_'+e+'"></label>'+"	</div>"+'	<div style="display:none;">'+'		<input name="options" type="checkbox"  id="mixedWithDigits_'+e+'" />'+'		<label for="mixedWithDigits" id="label_mixedWithDigits_'+e+'"></label>'+"	</div>"+"</div></form>"}]},{id:"langs",label:o.languagesTab,elements:[{type:"html",id:"langs",html:'<form name="languagesbar_'+e+'"><div class="inner_langs">'+'	<div class="messagebox"></div>	'+'   <div style="float:left;width:45%;margin-left:5px;" id="scayt_lcol_'+e+'" ></div>'+'   <div style="float:left;width:45%;margin-left:15px;" id="scayt_rcol_'+e+'"></div>'+"</div></form>"}]},{id:"dictionaries",label:o.dictionariesTab,elements:[{type:"html",style:"",id:"dictionaries",html:'<form name="dictionarybar_'+e+'"><div class="inner_dictionary" style="text-align:left; white-space:normal; width:320px; overflow: hidden;">'+'	<div style="margin:5px auto; width:80%;white-space:normal; overflow:hidden;" id="dic_message_'+e+'"> </div>'+'	<div style="margin:5px auto; width:80%;white-space:normal;"> '+'       <span class="cke_dialog_ui_labeled_label" >Dictionary name</span><br>'+'		<span class="cke_dialog_ui_labeled_content" >'+'			<div class="cke_dialog_ui_input_text">'+'				<input id="dic_name_'+e+'" type="text" class="cke_dialog_ui_input_text"/>'+"		</div></span></div>"+'		<div style="margin:5px auto; width:80%;white-space:normal;">'+'			<a style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_create_'+e+'">'+"				</a>"+'			<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_delete_'+e+'">'+"				</a>"+'			<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_rename_'+e+'">'+"				</a>"+'			<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_restore_'+e+'">'+"				</a>"+"		</div>"+'	<div style="margin:5px auto; width:95%;white-space:normal;" id="dic_info_'+e+'"></div>'+"</div></form>"}]},{id:"about",label:o.aboutTab,elements:[{type:"html",id:"about",style:"margin: 5px 5px;",html:'<div id="scayt_about_'+e+'"></div>'}]}],q={title:o.title,minWidth:360,minHeight:220,onShow:function(){var d=this;d.data=a.fire("scaytDialog",{}),d.options=d.data.scayt_control.option(),d.chosed_lang=d.sLang=d.data.scayt_control.sLang;if(!d.data||!d.data.scayt||!d.data.scayt_control){alert("Error loading application service"),d.hide();return}var e=0;b?d.data.scayt.getCaption(a.langCode||"en",function(a){if(e++>0)return;c=a,s.apply(d),t.apply(d),b=!1}):t.apply(d),d.selectPage(d.data.tab)},onOk:function(){var a=this.data.scayt_control;a.option(this.options);var b=this.chosed_lang;a.setLang(b),a.refresh()},onCancel:function(){var a=l();for(var b in a)a[b].checked=!1;n(m(),"")},contents:h},r=CKEDITOR.plugins.scayt.getScayt(a);for(g=0;g<f.length;g++)f[g]==1&&(h[h.length]=p[g]);f[2]==1&&(i=1);var s=function(){function D(a){var b=d.getById("dic_name_"+e).getValue();if(!b)return u(" Dictionary name should not be empty. "),!1;try{var c=a.data.getTarget().getParent(),f=/(dic_\w+)_[\w\d]+/.exec(c.getId())[1];C[f].apply(null,[c,b,j])}catch(g){u(" Dictionary error. ")}return!0}var a=this,b=a.data.scayt.getLangList(),g=["dic_create","dic_delete","dic_rename","dic_restore"],h=[],l=[],m=k,n;if(i){for(n=0;n<g.length;n++)h[n]=g[n]+"_"+e,d.getById(h[n]).setHtml('<span class="cke_dialog_ui_button">'+c["button_"+g[n]]+"</span>");d.getById("dic_info_"+e).setHtml(c.dic_info)}if(f[0]==1)for(n in m){var o="label_"+m[n],p=o+"_"+e,q=d.getById(p);if("undefined"!=typeof q&&"undefined"!=typeof c[o]&&"undefined"!=typeof a.options[m[n]]){q.setHtml(c[o]);var r=q.getParent();r.$.style.display="block"}}var s='<p><img src="'+window.scayt.getAboutInfo().logoURL+'" /></p>'+"<p>"+c.version+window.scayt.getAboutInfo().version.toString()+"</p>"+"<p>"+c.about_throwt_copy+"</p>";d.getById("scayt_about_"+e).setHtml(s);var t=function(b,c){var e=d.createElement("label");e.setAttribute("for","cke_option"+b),e.setHtml(c[b]),a.sLang==b&&(a.chosed_lang=b);var f=d.createElement("div"),g=CKEDITOR.dom.element.createFromHtml('<input id="cke_option'+b+'" type="radio" '+(a.sLang==b?'checked="checked"':"")+' value="'+b+'" name="scayt_lang" />');return g.on("click",function(){this.$.checked=!0,a.chosed_lang=b}),f.append(g),f.append(e),{lang:c[b],code:b,radio:f}};if(f[1]==1){for(n in b.rtl)l[l.length]=t(n,b.ltr);for(n in b.ltr)l[l.length]=t(n,b.ltr);l.sort(function(a,b){return b.lang>a.lang?-1:1});var z=d.getById("scayt_lcol_"+e),A=d.getById("scayt_rcol_"+e);for(n=0;n<l.length;n++){var B=n<l.length/2?z:A;B.append(l[n].radio)}}var C={};C.dic_create=function(a,b,d){var e=d[0]+","+d[1],f=c.err_dic_create,g=c.succ_dic_create;window.scayt.createUserDictionary(b,function(a){x(e),w(d[1]),g=g.replace("%s",a.dname),v(g)},function(a){f=f.replace("%s",a.dname),u(f+"( "+(a.message||"")+")")})},C.dic_rename=function(a,b){var d=c.err_dic_rename||"",e=c.succ_dic_rename||"";window.scayt.renameUserDictionary(b,function(a){e=e.replace("%s",a.dname),y(b),v(e)},function(a){d=d.replace("%s",a.dname),y(b),u(d+"( "+(a.message||"")+" )")})},C.dic_delete=function(a,b,d){var e=d[0]+","+d[1],f=c.err_dic_delete,g=c.succ_dic_delete;window.scayt.deleteUserDictionary(function(a){g=g.replace("%s",a.dname),x(e),w(d[0]),y(""),v(g)},function(a){f=f.replace("%s",a.dname),u(f)})},C.dic_restore=a.dic_restore||function(a,b,d){var e=d[0]+","+d[1],f=c.err_dic_restore,g=c.succ_dic_restore;window.scayt.restoreUserDictionary(b,function(a){g=g.replace("%s",a.dname),x(e),w(d[1]),v(g)},function(a){f=f.replace("%s",a.dname),u(f)})};var E=(j[0]+","+j[1]).split(","),F;for(n=0,F=E.length;n<F;n+=1){var G=d.getById(E[n]);G&&G.on("click",D,this)}},t=function(){var a=this;if(f[0]==1){var c=l();for(var g=0,h=c.length;g<h;g++){var k=c[g].id,m=d.getById(k);m&&(c[g].checked=!1,a.options[k.split("_")[0]]==1&&(c[g].checked=!0),b&&m.on("click",function(){a.options[this.getId().split("_")[0]]=this.$.checked?1:0}))}}if(f[1]==1){var o=d.getById("cke_option"+a.sLang);n(o.$,a.sLang)}i&&(window.scayt.getNameUserDictionary(function(a){var b=a.dname;x(j[0]+","+j[1]),b?(d.getById("dic_name_"+e).setValue(b),w(j[1])):w(j[0])},function(){d.getById("dic_name_"+e).setValue("")}),v(""))};return q});